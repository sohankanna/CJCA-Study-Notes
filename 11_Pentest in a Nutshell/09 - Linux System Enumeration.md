# 09 - Linux System Enumeration

## 1. What is System Enumeration?

**System enumeration** is the process of gathering detailed information about a compromised host's configuration, software, users, permissions, and network connections.

*   **Goal:** To build a complete picture of the target system to find misconfigurations or vulnerabilities that can be leveraged to escalate privileges from a standard user to the `root` user.
*   **Manual vs. Automated:** While you can (and should) know how to perform this process manually using standard Linux commands, this is often a time-consuming task. Automated enumeration scripts are used to speed up this process significantly.

---

## 2. LinPEAS: The Automated Enumeration Script

**LinPEAS** is a widely used and extremely popular shell script designed to perform an exhaustive local enumeration of a Linux host, specifically looking for common privilege escalation vectors.

*   **What it Does:** It runs a comprehensive suite of checks and organizes the output with color-coding to highlight potentially interesting or abusable findings.
*   **Key Checks Performed:**
    *   System Information (OS, kernel version)
    *   Running processes and scheduled tasks (`cron` jobs)
    *   Network information and listening services
    *   User and group information
    *   **SUID/SGID binaries**
    *   **Writable files and directories** in sensitive locations
    *   **Sudo privileges** (`sudo -l`)
    *   Known kernel exploits
    *   Stored credentials in files or environment variables

---

## 3. The Enumeration Workflow with LinPEAS

The process involves getting the script onto the target, running it, and analyzing the results.

### Step 1: Download LinPEAS to Your Attacker Machine
First, obtain the latest version of the `linpeas.sh` script from its official GitHub repository.

```shell
wget https://github.com/peass-ng/PEASS-ng/releases/latest/download/linpeas.sh
```

### Step 2: Transfer LinPEAS to the Target Machine
Using the SSH access we gained in the previous section (as the user `john`), we can use the `scp` (Secure Copy) command to upload the script.

*   **`scp` Syntax:** `scp -i <private_key> <local_file> <user>@<target_ip>:<remote_path>`
*   **Command:**
    ```shell
    # Make the script executable first on our machine
    chmod +x linpeas.sh

    # Copy the script to john's home directory on the target
    scp -i id_rsa ./linpeas.sh john@10.129.12.10:/home/john
    ```

### Step 3: Execute LinPEAS on the Target Machine
Once the script is on the target, we log in via SSH and run it, redirecting its extensive output to a file for later analysis.

1.  **Log in to the target:**
    ```shell
    ssh -i id_rsa john@10.129.12.10
    ```
2.  **Run the script and save the output:**
    ```shell
    # Make sure the script is executable on the target as well
    john@ubuntu:~$ chmod +x linpeas.sh
    
    # Run the script with all checks (-a) and no colors (-N),
    # redirecting STDOUT to a results file.
    john@ubuntu:~$ ./linpeas.sh -a -N > linpeas_results.txt
    ```

### Step 4: Retrieve and Analyze the Results
The final step is to transfer the results file back to our attacker machine for careful analysis.

*   **Download the results from the target:**
    ```shell
    # From your attacker machine (not the target's shell)
    scp -i id_rsa john@10.129.12.10:/home/john/linpeas_results.txt .
    ```
*   **Analyze the File:** Open `linpeas_results.txt` on your machine and carefully review the output. Pay close attention to the sections that LinPEAS highlights (often with `[91m`, `[93m` color codes, which you can `grep` for) as these indicate the most likely paths to privilege escalation.
