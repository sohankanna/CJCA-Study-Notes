# Module: Pentest in a Nutshell

This module serves as a practical, capstone-style walkthrough, applying the foundational concepts of penetration testing to a realistic, multi-stage scenario. It condenses the entire penetration testing lifecycle—from pre-engagement to post-exploitation—into a cohesive, hands-on narrative.

The primary goal of this section is to demonstrate how a penetration tester systematically moves from initial discovery to full system compromise by linking together findings from different phases. It showcases the real-world application of the tools and methodologies covered in previous modules.

---

## Module Sections (Notes)

The notes are organized to follow the logical flow of a professional penetration testing engagement, using a Linux and a Windows host as the targets.

### 1. Pre-Engagement
*   **Scope Definition:** Covers the critical first step of any engagement, including the importance of a **Non-Disclosure Agreement (NDA)** and a clearly defined **Statement of Work (SOW)**.
*   **Rules of Engagement (RoE):** Details the technical "ground rules" for the test, covering boundaries, communication channels, objectives, and legal permissions.
*   **Agreement & Preparation:** Summarizes the final agreement and emphasizes the critical importance of preparing a clean, isolated testing environment to prevent data cross-contamination.

### 2. Information Gathering & Vulnerability Assessment
*   **Publicly Available Data:** Explores the **Open Source Intelligence (OSINT)** phase, gathering information from public sources to build a profile of the target before any active scanning begins.
*   **Network and Service Scanning:** Details the initial active reconnaissance phase using `nmap` to map the network, identify live hosts, and enumerate open ports and services.
*   **Low-Hanging Fruits:** Focuses on analyzing the initial scan results to identify the most obvious and easily exploitable vulnerabilities, which often serve as the first point of entry.

### 3. Exploitation & Post-Exploitation (Linux Target)
*   **Linux Information Gathering:** A deep dive into the enumerated services on the Linux host, focusing on the misconfigured **Anonymous FTP** server and the vulnerable **WordPress** installation.
*   **Linux Initial Access:** Demonstrates three distinct methods for gaining an initial foothold on the Linux target: exploiting a WordPress RCE with Metasploit, using a discovered SSH private key, and using a password found in a `.bash_history` file.
*   **Linux System Enumeration:** Covers the post-exploitation process of using an automated script like **LinPEAS** to perform a deep scan of the local system for privilege escalation vectors.
*   **Linux Vulnerability Assessment:** Analyzes the `LinPEAS` output to identify a critical **`sudo` misconfiguration** as a clear path to root.
*   **Linux Privilege Escalation:** The final exploitation step on the Linux host, demonstrating how to abuse the `sudo` misconfiguration with `nano` to gain a `root` shell.
*   **Linux Pillaging:** Covers the process of re-running enumeration scripts *as root* to discover deeply embedded secrets, such as additional credentials and SSH keys.

### 4. Exploitation & Post-Exploitation (Windows Target)
*   **Windows Information Gathering:** The initial reconnaissance phase for the Windows host, using `nmap` and `crackmapexec` to enumerate services like **SMB** and the **Gitea** web application.
*   **Windows Initial Access:** Demonstrates gaining a foothold on the Windows target by exploiting an outdated Gitea version with Metasploit and leveraging reused credentials to access RDP.
*   **Windows System Enumeration:** Covers post-exploitation on the Windows host, using tools like `whoami` and an automated script (**WinPEAS**) to identify misconfigurations.
*   **Windows Vulnerability Assessment:** Analyzes the enumeration results to pinpoint a critical vulnerability: a script run by a privileged **scheduled task** that is located in a world-writable directory.
*   **Windows Privilege Escalation:** The final exploitation step, demonstrating how to modify the insecure scheduled task script to add our user to the local `Administrators` group, gaining full control of the system.
*   **Windows Pillaging:** Covers the final post-exploitation step of using administrative privileges to find and exfiltrate the "crown jewels"—a CSV file containing sensitive customer PII.

### 5. Reporting
*   **Proof of Concept (PoC):** Explains how to structure the detailed notes and evidence gathered throughout the test into a clear, repeatable Proof of Concept that validates the findings for the final report.
